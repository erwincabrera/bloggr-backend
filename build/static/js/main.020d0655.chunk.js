(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{52:function(e,t,n){e.exports=n(84)},84:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),u=n(17),l=n.n(u),o=n(3),s=n.n(o),i=n(7),p=n(13),m=n(14),f=n.n(m),d={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.message;return c.a.createElement("div",{className:"notification"},t)},E=n(9),v=null,g=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,f.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,f.a.delete("".concat("/api/blogs","/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={getAll:function(){return f.a.get("/api/blogs").then((function(e){return e.data}))},create:g,update:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat("/api/blogs","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:h,setToken:function(e){v="bearer ".concat(e)},addComment:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat("/api/blogs","/").concat(n,"/comments"),{content:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},y={get:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},j=function(e){var t=e.title,n=e.author,a=e.url;return(function(){var e=Object(i.a)(s.a.mark((function e(r){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.create({title:t,author:n,url:a});case 3:c=e.sent,r({type:"ADD_BLOG",payload:{blog:c}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},w=function(e,t){return function(n){n({type:"NEW_NOTIFICATION",payload:{text:e}}),clearTimeout(a),a=setTimeout((function(){n(x())}),t)}},x=function(){return{type:"CLEAR_NOTIFICATIONS"}},k=function(e){return O.setToken(e?e.token:null),{type:"SET_USER",payload:{user:e}}},S=n(5),I=n(15),N=n(27),T=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(p.a)(n,2),u=a[0],l=a[1],o=function(){return l(!u)};return Object(r.useImperativeHandle)(t,(function(){return{toggle:o}})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:u?"":"none"}},e.children),c.a.createElement("button",{style:{display:u?"none":""},onClick:o},e.label))}));T.displayName="Togglable";var C=function(e){var t=Object(r.useState)(""),n=Object(p.a)(t,2),a=n[0],u=n[1],l=Object(r.useState)(""),o=Object(p.a)(l,2),s=o[0],i=o[1],m=Object(r.useState)(""),f=Object(p.a)(m,2),d=f[0],b=f[1],E=Object(r.useRef)();return c.a.createElement(T,{label:"New blog",ref:E},c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"New"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleSubmit({title:a,author:s,url:d}),E.current.toggle(),u(""),i(""),b("")}},c.a.createElement("div",null,c.a.createElement("input",{id:"titleInput",type:"text",onChange:function(e){return u(e.target.value)},value:a,placeholder:"Title"})),c.a.createElement("div",null,c.a.createElement("input",{id:"authorInput",type:"text",onChange:function(e){return i(e.target.value)},value:s,placeholder:"Author"})),c.a.createElement("div",null,c.a.createElement("input",{id:"urlInput",type:"text",onChange:function(e){return b(e.target.value)},value:d,placeholder:"URL"})),c.a.createElement("button",{type:"submit"},"Create"))))},L=function(){var e=Object(E.c)((function(e){return e.blogs})),t=Object(E.b)(),n=function(){var e=Object(i.a)(s.a.mark((function e(n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.title,r=n.author,c=n.url,t(j({title:a,author:r,url:c})),t(w("Added ".concat(a," by ").concat(r,"."),3e3));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Blogs"),c.a.createElement(C,{handleSubmit:n}),c.a.createElement("div",{className:"blogs"},c.a.createElement("ul",null,Object(N.a)(e).sort((function(e,t){return t.likes-e.likes})).map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(I.b,{to:"blogs/".concat(e.id)},e.title))})))))},A=function(e){var t=e.users;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Users"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null," "),c.a.createElement("th",null,"Blogs Created"))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,c.a.createElement(I.b,{to:"/users/".concat(e.id)},e.name)),c.a.createElement("td",null,e.blogs.length))})))))},B=function(e){var t=e.user;if(!t)return c.a.createElement("div",null,"User not found.");var n=t.blogs.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Added Blogs"),c.a.createElement("ul",null,t.blogs.map((function(e){return c.a.createElement("li",{key:e.id},e.title)})))):c.a.createElement("p",null,"No blogs added.");return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,t.name),n)},U=n(21),_=function(e){var t=e.blog,n=Object(r.useState)(""),a=Object(p.a)(n,2),u=a[0],l=a[1],o=Object(E.c)((function(e){return e.users.currentUser})),m=Object(E.b)();if(!t)return c.a.createElement("p",null,"Blog not found.");var f=t.comments&&c.a.createElement("ul",null,t.comments.map((function(e){return c.a.createElement("li",{key:e},e)})));return c.a.createElement("section",null,c.a.createElement("h2",null,"".concat(t.title," by ").concat(t.author)),c.a.createElement("a",{href:t.url},t.url),c.a.createElement("p",null,"Likes: ",t.likes," ",c.a.createElement("button",{className:"like",onClick:function(){var e=Object(U.a)({},t,{likes:t.likes+1});m(function(e){return function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.update(e);case 3:n({type:"UPDATE_BLOG",payload:{blog:e}}),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(e))}},"Like")),c.a.createElement("p",null,"Added by ".concat(o.name,".")),o.id===t.user.id&&c.a.createElement("button",{onClick:function(){window.confirm("Remove ".concat(t.title,"?"))&&m(function(e){return function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.deleteBlog(e);case 3:204===t.sent.status&&n({type:"DELETE_BLOG",payload:{id:e.id}}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t))}},"Delete"),c.a.createElement("h2",null,"Comments"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m(function(e,t){return function(){var n=Object(i.a)(s.a.mark((function n(a){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.addComment(e,t);case 3:a({type:"ADD_COMMENT",payload:{comment:e,blogId:t}}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}(u,t.id)),l("")}},c.a.createElement("input",{type:"text",value:u,onChange:function(e){return l(e.target.value)}}),c.a.createElement("button",null,"Add Comment")),f)},D=n(23),F=n(30),R=n(50),G=n(29),J=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],u=Object(r.useState)(""),l=Object(p.a)(u,2),o=l[0],m=l[1],f=Object(E.b)(),v=Object(E.c)((function(e){return e.blogs})),g=Object(E.c)((function(e){return e.users.allUsers})),h=Object(E.c)((function(e){return e.users.currentUser})),j=Object(E.c)((function(e){return e.notification})),x=Object(S.f)("/users/:id"),N=Object(S.f)("/blogs/:id");Object(r.useEffect)((function(){f(function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getAll();case 3:n=e.sent,t({type:"SET_BLOGS",payload:{blogs:n}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),f(function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get();case 3:n=e.sent,t({type:"INITIALIZE_USERS",payload:{users:n}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());try{var e=window.localStorage.getItem("user");if(e){var t=JSON.parse(e);f(k(t))}}catch(n){}}),[f]);var T=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.login({username:n,password:o});case 4:r=e.sent,window.localStorage.setItem("user",JSON.stringify(r)),f(k(r)),a(""),m(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),f(w("Login failed",3e3));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();if(null==h)return c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Login"),j&&c.a.createElement(b,{message:j}),c.a.createElement("form",{onSubmit:T},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"username"},"Username: "),c.a.createElement("input",{type:"text",id:"username",onChange:function(e){return a(e.target.value)},value:n})),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"password"},"Password: "),c.a.createElement("input",{type:"password",id:"password",onChange:function(e){return m(e.target.value)},value:o})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Login"))));var C=c.a.createElement(D.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"sm"},c.a.createElement(G.a,null,c.a.createElement(D.a.Brand,{href:"#",className:"border rounded border-info p-1 text-info"},"Bloggr"),c.a.createElement(D.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),c.a.createElement(D.a.Collapse,{id:"responsive-navbar-nav"},c.a.createElement(F.a,{className:"mr-auto"},c.a.createElement(F.a.Link,{href:"#",as:"span"},c.a.createElement(I.b,{to:"/",style:{color:"white"}},"Blogs")),c.a.createElement(F.a.Link,{href:"#",as:"span"},c.a.createElement(I.b,{to:"/users",style:{color:"white"}},"Users"))),c.a.createElement(D.a.Text,null,"Logged in as ".concat(h.name)),c.a.createElement(R.a,{variant:"info",size:"sm",className:"mx-1",onClick:function(){window.localStorage.removeItem("user"),f(k(null))}},"Logout"))));return c.a.createElement(G.a,{fluid:!0,className:"px-0"},C,j&&c.a.createElement(b,{message:j}),c.a.createElement(G.a,null,c.a.createElement(S.c,null,c.a.createElement(S.a,{path:"/users/:id"},c.a.createElement(B,{user:x?g.find((function(e){return e.id===x.params.id})):null})),c.a.createElement(S.a,{path:"/users"},c.a.createElement(A,{users:g})),c.a.createElement(S.a,{path:"/blogs/:id"},c.a.createElement(_,{blog:N?v.find((function(e){return e.id===N.params.id})):null})),c.a.createElement(S.a,{path:"/"},c.a.createElement(L,null)))))},M=n(22),z={currentUser:null,allUsers:[]},P=n(51),W=Object(M.c)({blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOGS":return t.payload.blogs;case"ADD_BLOG":return e.concat(t.payload.blog);case"UPDATE_BLOG":return e.map((function(e){return e.id===t.payload.blog.id?t.payload.blog:e}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.payload.id}));case"ADD_COMMENT":return e.map((function(e){return e.id!==t.payload.blogId?e:Object(U.a)({},e,{comments:[].concat(Object(N.a)(e.comments),[t.payload.comment])})}));default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_NOTIFICATION":return t.payload.text;case"CLEAR_NOTIFICATIONS":return null;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_USERS":return Object(U.a)({},e,{allUsers:t.payload.users});case"SET_USER":return Object(U.a)({},e,{currentUser:t.payload.user});default:return e}}}),Z=Object(M.d)(W,Object(M.a)(P.a));l.a.render(c.a.createElement(E.a,{store:Z},c.a.createElement(I.a,null,c.a.createElement(J,null))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.020d0655.chunk.js.map